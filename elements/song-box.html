<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../bower_components/core-icons/av-icons.html">

<polymer-element name="song-box" attributes="title artist album length filename">
	<template>
		<style>
			:host {
				display: block;
				position: relative;
				background-color: white;
				box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);
				padding: 20px;
                width: calc(100% - 40px);
                margin-bottom: 10px;
				font-size: 1.2rem;
				font-weight: 300;
			}
			
			.song-header {
				margin-bottom: 10px;
			}

			#contents h1 {
				margin: 0;
				font-size: 1.8rem;
				font-weight: 300;
				z-index: 2;
			}
			
			#contents h2 {
				margin: 0;
				font-size: 1.2rem;
				font-weight: 300;
				z-index: 2;
			}
			
			#contents h3 {
				margin: 0;
				font-size: 1rem;
				font-weight: 200;
				z-index: 2;
			}
			
			img {
				width: 70px;
				height: 70px;
				border-radius: 50%;
				margin: 10px;
			}
			
			#buttons {
				position: absolute;	
				top: calc(100% - 50px);
				right: 8px;
				color: #636363;
			}
            
            paper-icon-button {
                vertical-align: middle;
            } 

            paper-icon-button.hover:hover {
                background: #eee;
                border-radius: 50%;
            }
		</style>
		
        <style shim-shadowdom="">
            core-tooltip.fancy::shadow .core-tooltip {
              opacity: 0;
              -webkit-transition: all 300ms cubic-bezier(0,1.92,.99,1.07);
              transition: all 300ms cubic-bezier(0,1.92,.99,1.07);
              -webkit-transform: translate3d(0, -10px, 0);
              transform: translate3d(0, -10px, 0);
            }

            core-tooltip.fancy:hover::shadow .core-tooltip,
            core-tooltip.fancy:focus::shadow .core-tooltip {
              opacity: 1;
              -webkit-transform: translate3d(0, 0, 0);
              transform: translate3d(0, 0, 0);
            }
        </style>
		
		<div class="song-header" layout horizontal center>
			<img src='/api/v1/art.php?file={{filename}}'></img>
			<div id="contents">
				<h1>{{title}}</h1>
			   <core-tooltip label="{{album}}" class="fancy" role="tooltip">
					<h2>{{artist}}</h2>
				</core-tooltip>
				<h3>{{length}}</h3>
			</div>
		</div>

		<div id="buttons">
            <a href="/media{{filename}}" style="text-decoration:none;color:inherit;" target="_blank">
                <core-tooltip label="You may need to right-click, 'Save As...'" class="fancy" role="tooltip">
                    <paper-icon-button class="hover" icon="file-download"></paper-icon-button>
                </core-tooltip>
            </a>
			<paper-icon-button id="control" class="hover" icon="{{icon}}" onclick="{{onClick}}"></paper-icon-button>
		</div>
		
		<content></content>
	</template>
	
	<script>
		Polymer('song-box', {
            icon: "av:play-arrow",
            onClick: function() {
                document.querySelector('song-box').icon = 'av:pause';
                this.fire('play', {title: 'song name'});
            }
        });
	</script>
</polymer-element>